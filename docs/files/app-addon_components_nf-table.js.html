<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>app-addon/components/nf-table.js - Ember-CLI-Ember-DVC</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../assets/css/logo.png" title="Ember-CLI-Ember-DVC"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/components.nf-area.html">components.nf-area</a></li>
            
                <li><a href="../classes/components.nf-area-stack.html">components.nf-area-stack</a></li>
            
                <li><a href="../classes/components.nf-bars.html">components.nf-bars</a></li>
            
                <li><a href="../classes/components.nf-cell.html">components.nf-cell</a></li>
            
                <li><a href="../classes/components.nf-column.html">components.nf-column</a></li>
            
                <li><a href="../classes/components.nf-crosshair.html">components.nf-crosshair</a></li>
            
                <li><a href="../classes/components.nf-dot.html">components.nf-dot</a></li>
            
                <li><a href="../classes/components.nf-gg.html">components.nf-gg</a></li>
            
                <li><a href="../classes/components.nf-graph.html">components.nf-graph</a></li>
            
                <li><a href="../classes/components.nf-graph-content.html">components.nf-graph-content</a></li>
            
                <li><a href="../classes/components.nf-header.html">components.nf-header</a></li>
            
                <li><a href="../classes/components.nf-horizontal-line.html">components.nf-horizontal-line</a></li>
            
                <li><a href="../classes/components.nf-line.html">components.nf-line</a></li>
            
                <li><a href="../classes/components.nf-plot.html">components.nf-plot</a></li>
            
                <li><a href="../classes/components.nf-range-marker.html">components.nf-range-marker</a></li>
            
                <li><a href="../classes/components.nf-range-markers.html">components.nf-range-markers</a></li>
            
                <li><a href="../classes/components.nf-right-tick.html">components.nf-right-tick</a></li>
            
                <li><a href="../classes/components.nf-scroll-area.html">components.nf-scroll-area</a></li>
            
                <li><a href="../classes/components.nf-selection-box.html">components.nf-selection-box</a></li>
            
                <li><a href="../classes/components.nf-table.html">components.nf-table</a></li>
            
                <li><a href="../classes/components.nf-table-group.html">components.nf-table-group</a></li>
            
                <li><a href="../classes/components.nf-vertical-line.html">components.nf-vertical-line</a></li>
            
                <li><a href="../classes/components.nf-x-axis.html">components.nf-x-axis</a></li>
            
                <li><a href="../classes/components.nf-y-axis.html">components.nf-y-axis</a></li>
            
                <li><a href="../classes/components.nf-y-diff.html">components.nf-y-diff</a></li>
            
                <li><a href="../classes/mixins.graph-area-utils.html">mixins.graph-area-utils</a></li>
            
                <li><a href="../classes/mixins.graph-data-graphic.html">mixins.graph-data-graphic</a></li>
            
                <li><a href="../classes/mixins.graph-data-position-utils.html">mixins.graph-data-position-utils</a></li>
            
                <li><a href="../classes/mixins.graph-graphic-with-tracking-dot.html">mixins.graph-graphic-with-tracking-dot</a></li>
            
                <li><a href="../classes/mixins.graph-has-graph-parent.html">mixins.graph-has-graph-parent</a></li>
            
                <li><a href="../classes/mixins.graph-line-utils.html">mixins.graph-line-utils</a></li>
            
                <li><a href="../classes/mixins.graph-registered-graphic.html">mixins.graph-registered-graphic</a></li>
            
                <li><a href="../classes/mixins.graph-requires-scale-source.html">mixins.graph-requires-scale-source</a></li>
            
                <li><a href="../classes/mixins.graph-selectable-graphic.html">mixins.graph-selectable-graphic</a></li>
            
                <li><a href="../classes/mixins.table-column-registrar.html">mixins.table-column-registrar</a></li>
            
                <li><a href="../classes/utils.nf.graph-mouse-action-context.html">utils.nf.graph-mouse-action-context</a></li>
            
                <li><a href="../classes/utils.nf.graph-tracking-action-context.html">utils.nf.graph-tracking-action-context</a></li>
            
                <li><a href="../classes/utils.nf.nf-graph-action-context.html">utils.nf.nf-graph-action-context</a></li>
            
                <li><a href="../classes/utils.nf.scroll-area-action-context.html">utils.nf.scroll-area-action-context</a></li>
            
                <li><a href="../classes/utils.parse-property-expression.html">utils.parse-property-expression</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="../modules/utils_nf_array-helpers.html">utils/nf/array-helpers</a></li>
            
                <li><a href="../modules/utils_nf_svg-dom.html">utils/nf/svg-dom</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: app-addon/components/nf-table.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
import Ember from &#x27;ember&#x27;;
import multiSort from &#x27;../utils/multi-sort&#x27;;
import TableColumnRegistrar from &#x27;../mixins/table-column-registrar&#x27;;
import parsePropExpr from &#x27;../utils/parse-property-expression&#x27;;
import { naturalCompare } from &#x27;../utils/nf/array-helpers&#x27;; 
import NfTableGroupController from &#x27;../controllers/nf-table-group-controller&#x27;;
/**
	Composable table component with built-in sorting
	
	### Basic Example

	      {{#nf-table rows=myData}}

	      	{{#nf-column sortField=&quot;foo&quot;}}
	      	  {{nf-header}}
	      	  	&lt;span class=&quot;nf-column-label&quot;&gt;Foo&lt;/span&gt;
	      	  {{/nf-header}}
	      	  {{#nf-cell}}
	      			{{row.foo}}
	      	  {{/nf-cell}}
	      	{{/nf-column}}

	      	{{#nf-column sortField=&quot;foo&quot;}}
	      	  {{nf-header}}
	      	  	&lt;span class=&quot;nf-column-label&quot;&gt;Bar&lt;/span&gt;
	      	  {{/nf-header}}
	      	  {{#nf-cell}}
	      			{{row.bar}}
	      	  {{/nf-cell}}
	      	{{/nf-column}}

	      {{/nf-table}}
	
	The example above will create a sortable table from an array &#x60;myData&#x60; containing objects
	with fields &#x60;foo&#x60; and &#x60;bar&#x60;.

	### Grouped Example

	If you wish to create a &quot;grouped table&quot;, you simply need to group the data with the &#x60;groupBy&#x60;
	property.

	Additionally, you can add grouping rows with the &#x60;{{nf-table-group}}&#x60; component, which allows you
	to define the columns for the group rows. **If you do this, you will need to create an ArrayController**
	for the group that will carry with it any computed properties you might need, such as a sum or average
	aggregated over the group. The array controller for your grouping must be assigned to the &#x60;itemController&#x60;
	property on the &#x60;nf-table-group&#x60; component.

				{{#nf-table rows=myData groupBy=&quot;baz&quot;}}
					
					{{#nf-table-group itemController=&quot;my-group-row&quot;}}

						{{#nf-column}}
							{{#nf-cell colspan=&quot;2&quot;}}
								Baz: {{group.baz}}
								Bars: {{group.barSum}}
							{{/nf-cell}}
						{{/nf-column}}
					
					{{/nf-table-group}}

	      	{{#nf-column sortBy=&quot;foo&quot;}}
	      	  {{nf-header}}
	      	  	&lt;span class=&quot;nf-column-label&quot;&gt;Foo&lt;/span&gt;
	      	  {{/nf-header}}
	      	  {{#nf-cell}}
	      			{{row.foo}}
	      	  {{/nf-cell}}
	      	{{/nf-column}}
	      	
	      	{{#nf-column sortBy=&quot;foo&quot;}}
	      	  {{nf-header}}
	      	  	&lt;span class=&quot;nf-column-label&quot;&gt;Bar&lt;/span&gt;
	      	  {{/nf-header}}
	      	  {{#nf-cell}}
	      			{{row.bar}}
	      	  {{/nf-cell}}
	      	{{/nf-column}}

	      {{/nf-table}}

	Which would need an accompanying array controller definition &#x60;my-group-row&#x60;:

				export default Ember.ArrayController.extend({
					// returns the first value from the array
					baz: function(){
						return this.get(&#x27;model&#x27;)[0].baz;
					}.property(&#x27;model.@each&#x27;),

					//gets the sum of all the bars
					barSum: function() {
						return this.get(&#x27;model&#x27;).reduce(function(sum, item) {
							return sum + item.bar;
						}, 0);
					}.property(&#x27;model.@each.bar&#x27;),
			  });

	### Styling
	
	nf-table emits a &#x60;&lt;table&gt;&#x60; with a class of &#x60;nf-table&#x60; applied to it.


	@namespace components
	@class nf-table
	@extends Ember.Component
	@uses mixins.table-column-registrar
*/
export default Ember.Component.extend(TableColumnRegistrar, {
	tagName: &#x27;div&#x27;,

	/**
		Property used by child components to locate the table component.
		@property isTable
		@type Boolean
		@default true
	*/
	isTable: true,

	/**
		Gets the nf-table-group component if one is present.
		@property tableGroup
		@type components.nf-table-group
		@default null
	*/
	tableGroup: null,

	/**
		The expression used to locate the values in the rows to group by.
		@property groupBy
		@type String
		@default null
	*/
	groupBy: null,

	/**
		Gets or sets whether the table has a scrollable layout.
		@property scrollable
		@type Boolean
		@default false
	*/
	scrollable: false,

	/**
		Gets whether or not to use the grouped table layout
		@property useGroupedTableLayout
		@type Boolean
		@private
		@readonly
	*/
	useGroupedTableLayout: Ember.computed.bool(&#x27;groupBy&#x27;),

	/**
		Gets an array of grouped and sorted data, represented as an array of arrays.
		@property sortedGroups
		@type Array
		@readonly
	*/
	sortedGroups: function() {
		var sortMap = this.get(&#x27;sortMap&#x27;);
		var rows = this.get(&#x27;rows&#x27;);
		var groupBy = this.get(&#x27;groupBy&#x27;);
		if(!groupBy || !rows || rows.length === 0) {
			return null;
		}

		var alreadyGrouping = sortMap.any(function(x) {
			return x.by === groupBy;
		});

		if(!alreadyGrouping) {
			sortMap.unshift({
				by: groupBy,
				direction: 1
			});
		}

		var rowsCopy = rows.slice();
		multiSort(rowsCopy, sortMap);

		var prevGroupVal;
		var group;
		var groupByExpr = parsePropExpr(groupBy);

		var groups = rowsCopy.reduce(function(groups, d) {
			var groupVal = groupByExpr(d) || null;

			if(groupVal !== prevGroupVal) {
				group = [];
				group.groupValue = groupVal;
				groups.push(group);
				prevGroupVal = groupVal;
			}

			group.push(d);
			return groups;
		}, []);

		var tableGroupingCtrl = NfTableGroupController.create({
			container: this.get(&#x27;container&#x27;),
			content: groups,
			table: this,
		});

		var itemController = this.get(&#x27;tableGroup.itemController&#x27;);

		if(itemController) {
			tableGroupingCtrl.set(&#x27;itemController&#x27;, itemController);
		}

		return tableGroupingCtrl;
	}.property(&#x27;rows.@each&#x27;, &#x27;sortMap&#x27;, &#x27;groupBy&#x27;, &#x27;tableGroup.itemController&#x27;),

	/**
		Alias for the rowAction on the nf-table-group
		@property groupRowAction
		@type String
		@default null
	*/
	groupRowAction: Ember.computed.alias(&#x27;tableGroup.rowAction&#x27;),

	/**
		The data source for rows to display in this table.
		@property rows
		@default null
	*/
	rows: null,

	classNames: [&#x27;nf-table&#x27;],

	hasRendered: false,

	_hasRendered: function() {
		this.set(&#x27;hasRendered&#x27;, true);
	}.on(&#x27;willInsertElement&#x27;),

	/**
		Gets the an array of sorts, in order to be processed when sorting the rows.
		@property sortMap
		@readonly
		@private
	*/
	sortMap: function(){
		return this.get(&#x27;columns&#x27;).reduce(function(sortMap, col) {
			var direction = col.get(&#x27;direction&#x27;);
			if(direction) {
				var sortBy = col.get(&#x27;sortBy&#x27;);
				sortBy = sortBy.replace(/^row\./, &#x27;&#x27;);
				if(sortBy) {
					if(col.get(&#x27;sortNatural&#x27;)) {
						sortMap.push(function(a, b){
							var ax = Ember.get(a, sortBy);
							var bx = Ember.get(b, sortBy);
							return naturalCompare(ax, bx) * direction;
						});
					} else {
						sortMap.push({
							by: sortBy,
							direction: direction,
						});
					}
				}
			}
			return sortMap;
		}, []);
	}.property(&#x27;columns.@each.sortDirection&#x27;, &#x27;columns.@each.sortBy&#x27;),

	/**
		A computed property returning a sorted copy of &#x60;rows&#x60;
		@property sortedRows
		@type Array
		@readonly
	*/
	sortedRows: function(){
		var sortMap = this.get(&#x27;sortMap&#x27;);
		var rowsCopy = this.get(&#x27;rows&#x27;).slice();
		multiSort(rowsCopy, sortMap);
		return rowsCopy;
	}.property(&#x27;rows.@each&#x27;, &#x27;sortMap&#x27;),

	/**
		A computed alias returning the controller of the current view. Used to wire
		up child templates to the proper controller.
		@property parentController
		@type Ember.Controller
		@readonly
	*/
	parentController: Ember.computed.alias(&#x27;templateData.view.controller&#x27;),

	/**
		The name of the action to fire when a row is clicked.
		Sends an object with the &#x60;row&#x60; and &#x60;table&#x60;.

		For group rows, see {{#crossLink &quot;components.nf-table-group/rowAction:property&quot;}}{{/crossLink}}.
		@property rowAction
		@type String
		@default null
	*/
	rowAction: null,

	actions: {

		/**
			Action handler to sort columns by a passed column. Sets the &#x60;sortDirection&#x60;
			of the pass column to the appropriate value based on the &#x60;sortType&#x60;.
			@method actions.sort
			@param sortedColumn {nf-column}
		*/
		sort: function(sortedColumn) {
			sortedColumn.toggleSortDirection();
		},

		rowClick: function(row, group){
			this.sendAction(&#x27;rowAction&#x27;, row, group, this);
		},

		groupRowClick: function(group){
			this.sendAction(&#x27;groupRowAction&#x27;, group, this);
		},

		scrolled: function(e) {
			e.data = this;
			this.sendAction(&#x27;scrollAction&#x27;, e);
		},
	},
});


    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
