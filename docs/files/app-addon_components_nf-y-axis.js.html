<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>app-addon/components/nf-y-axis.js - Ember-CLI-Ember-DVC</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../assets/css/logo.png" title="Ember-CLI-Ember-DVC"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/nf-area-stack.html">nf-area-stack</a></li>
            
                <li><a href="../classes/nf-column.html">nf-column</a></li>
            
                <li><a href="../classes/nf-graph.html">nf-graph</a></li>
            
                <li><a href="../classes/nf-table.html">nf-table</a></li>
            
                <li><a href="../classes/nf-x-axis.html">nf-x-axis</a></li>
            
                <li><a href="../classes/nf-y-axis.html">nf-y-axis</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="../modules/ember-cli-ember-dvc.html">ember-cli-ember-dvc</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: app-addon/components/nf-y-axis.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
import Ember from &#x27;ember&#x27;;
import { property } from &#x27;../utils/computed-property-helpers&#x27;;
import HasGraphParent  from &#x27;../mixins/graph-has-graph-parent&#x27;;

/**
 * A component for adding a templated y axis to an &#x60;nf-graph&#x60; component.
 * All items contained within this component are used to template each tick mark on the 
 * rendered graph. Tick values are supplied to the inner scope of this component on the
 * view template via &#x60;tick&#x60;.
 * 
 * ### Styling
 * 
 * The main container will have a &#x60;nf-y-axis&#x60; class.
 * A &#x60;orient-left&#x60; or &#x60;orient-right&#x60; container will be applied to the container
 * depending on the &#x60;orient&#x60; setting.
 *
 * Ticks are positioned via a &#x60;&lt;g&gt;&#x60; tag, that will contain whatever is passed into it via
 * templating, along with the tick line. &#x60;&lt;text&gt;&#x60; tags within tick templates do have some 
 * default styling applied to them to position them appropriately based off of orientation.
 *
 * ### Example
 *
 *       {{#nf-graph width=500 height=300}}
 *         {{#nf-y-axis width=40}}
 *           &lt;text&gt;y is {{tick.value}}&lt;/text&gt;
 *         {{/nf-y-axis}}
 *       {{/nf-graph}}
 *
 * @module ember-cli-ember-dvc
 * @class nf-y-axis
 */
export default Ember.Component.extend(HasGraphParent, {
  tagName: &#x27;g&#x27;,

  /**
   * The number of ticks to display
   * @property tickCount
   * @type Number
   * @default 5
   */
  tickCount: 5,

  /**
   * The length of the tick&#x27;s accompanying line.
   * @property tickLength
   * @type Number
   * @default 5
   */
  tickLength: 5,

  /**
   * The distance between the tick line and the origin tick&#x27;s templated output
   * @property tickPadding
   * @type Number
   * @default 3
   */
  tickPadding: 3,

  /**
   * The total width of the y axis
   * @property width
   * @type Number
   * @default 40
   */
  width: 40,

  /**
   * The orientation of the y axis. Possible values are &#x60;&#x27;left&#x27;&#x60; and &#x60;&#x27;right&#x27;&#x60;
   * @property orient
   * @type String
   * @default &#x27;left&#x27;
   */
  orient: &#x27;left&#x27;,

  attributeBindings: [&#x27;transform&#x27;],

  classNameBindings: [&#x27;:nf-y-axis&#x27;, &#x27;isOrientRight:orient-right:orient-left&#x27;],
  
  _tickFilter: null,

  /**
   * An optional filtering function to allow more control over what tick marks are displayed.
   * The function should have exactly the same signature as the function you&#x27;d use for an
   * &#x60;Array.prototype.filter()&#x60;.
   *
   * @property tickFilter
   * @type Function
   * @default null
   * @example
   *
   *       {{#nf-y-axis tickFilter=myFilter}} 
   *         &lt;text&gt;{{tick.value}}&lt;/text&gt;
   *       {{/nf-y-axis}}
   *
   * And on your controller:
   * 
   *       myFilter: function(tick, index, ticks) {
   *         return tick.value &lt; 1000;
   *       },
   *
   * The above example will filter down the set of ticks to only those that are less than 1000.
   */
  tickFilter: function(name, value) {
    if(arguments.length &gt; 1) {
      this._tickFilter = value;
    }
    return this._tickFilter;
  }.property(),

  /**
   * computed property. returns true if &#x60;orient&#x60; is equal to &#x60;&#x27;right&#x27;&#x60;.
   * @property isOrientRight
   * @type Boolean
   * @readonly
   */
  isOrientRight: Ember.computed.equal(&#x27;orient&#x27;, &#x27;right&#x27;),


  /**
   * The SVG transform for positioning the component.
   * @property transform
   * @type String
   * @readonly
   */
  transform: function(){
    var x = this.get(&#x27;x&#x27;);
    var y = this.get(&#x27;y&#x27;);
    return &#x27;translate(%@ %@)&#x27;.fmt(x, y);
  }.property(&#x27;x&#x27;, &#x27;y&#x27;),

  /**
   * The x position of the component
   * @property x
   * @type Number
   * @readonly
   */
  x: function(){
    var orient = this.get(&#x27;orient&#x27;);
    if(orient !== &#x27;left&#x27;) {
      return this.get(&#x27;graph.width&#x27;) - this.get(&#x27;width&#x27;) - this.get(&#x27;graph.paddingRight&#x27;);
    }
    return this.get(&#x27;graph.paddingLeft&#x27;);
  }.property(&#x27;orient&#x27;, &#x27;graph.width&#x27;, &#x27;width&#x27;, &#x27;graph.paddingLeft&#x27;, &#x27;graph.paddingRight&#x27;),

  /**
   * The y position of the component
   * @property y
   * @type Number
   * @readonly
   */
  y: Ember.computed.alias(&#x27;graph.graphY&#x27;),

  /** 
   * the height of the component
   * @property height
   * @type Number
   * @readonly
   */
  height: Ember.computed.alias(&#x27;graph.height&#x27;),

  /**
   * Function to create the tick values. Can be overriden to provide specific values.
   * @function tickFactory
   * @param yScale {Function} a d3 scale function
   * @param tickCount {Number} the number of ticks desired
   * @param uniqueYData {Array} all y data represented, filted to be unique (used for ordinal cases)
   * @param yScaleType {String} the scale type of the containing graph.
   * @return {Array} an array of domain values at which ticks should be placed.
   */
  tickFactory: function(yScale, tickCount, uniqueYData, yScaleType) {
    var ticks = yScaleType === &#x27;ordinal&#x27; ? uniqueYData : yScale.ticks(tickCount);
    if (yScaleType === &#x27;log&#x27;) {
      var step = Math.round(ticks.length / tickCount);
      ticks = ticks.filter(function (tick, i) {
        return i % step === 0;
      });
    }
    return ticks;
  },

  /**
   * All y data from the graph, filtered to unique values.
   * @property uniqueYData
   * @type Array
   * @readonly
   */
  uniqueYData: Ember.computed.uniq(&#x27;graph.yData&#x27;),

  /** 
   * The ticks to be displayed.
   * @property ticks
   * @type Array
   * @readonly
   */
  ticks: property(&#x27;graph.yScale&#x27;, &#x27;tickCount&#x27;, &#x27;graph.yScaleType&#x27;, &#x27;tickPadding&#x27;, &#x27;axisLineX&#x27;, &#x27;tickLength&#x27;, &#x27;isOrientRight&#x27;, &#x27;tickFilter&#x27;, &#x27;uniqueYData&#x27;,
    function(yScale, tickCount, yScaleType, tickPadding, axisLineX, tickLength, isOrientRight, tickFilter, uniqueYData) {
      var ticks = this.tickFactory(yScale, tickCount, uniqueYData, yScaleType);

      var result = ticks.map(function (tick) {
        return {
          value: tick,
          y: yScale(tick),
          x1: axisLineX + tickLength,
          x2: axisLineX,
          labelx: isOrientRight ? (tickLength + tickPadding) : (axisLineX - tickLength - tickPadding),
        };
      });

      if(tickFilter) {
        result = result.filter(tickFilter);
      }

      return result;
    }
  ),

  /**
   * The x position of the axis line.
   * @property axisLineX
   * @type Number
   * @readonly
   */
  axisLineX: function(){
    var orient = this.get(&#x27;orient&#x27;);
    var width = this.get(&#x27;width&#x27;);
    return orient === &#x27;right&#x27; ? 0 : width;
  }.property(&#x27;orient&#x27;, &#x27;width&#x27;),

  _hasGraph: function(){
    var graph = this.get(&#x27;graph&#x27;);
    graph.set(&#x27;yAxis&#x27;, this);
  }.observes(&#x27;graph&#x27;)
});

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
