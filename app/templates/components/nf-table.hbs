{{#if hasRendered}}
  {{#if scrollable}}
    {{#if useGroupedTableLayout}}
      <div class="nf-table-scrollable-header">
        <table>
          <thead>
            <tr>
              {{#each column in visibleColumns}}
                {{view 'nf-table-header' column=column class=column.headerClassNames controller=parentController}}
              {{/each}}
            </tr>
          </thead>
        </table>
      </div>

      {{#nf-scroll-area 
        scrollTop=scrollTop 
        scrollTopPercentage=scrollTopPercentage 
        changeAction="scrolled" class="nf-table-scrollable-body"}}
        <table>
          <tbody>
            {{#each group in groups}}
              <tr class="nf-table-group" {{action 'groupRowClick' group}} {{bind-attr data-nf-table-group-key=group.model.groupKey}}>
                {{#each column in tableGroup.visibleColumns}}
                  {{view 'nf-table-cell' column=column class=column.cellClassNames controller=parentController}}
                {{/each}}
              </tr>
              {{#each row in group}}
                <tr class="nf-table-group-child" {{action 'rowClick' row group}} {{bind-attr data-nf-table-sort-key=row.__meta__trackedKey}}>
                  {{#each column in visibleColumns}}
                    {{view 'nf-table-cell' column=column class=column.cellClassNames controller=parentController}}
                  {{/each}}
                </tr>
              {{/each}}
            {{/each}}
          </tbody>
        </table>    
      {{/nf-scroll-area}}
    {{else}}
      
      {{!-- SCROLLABLE DEFAULT --}}
      <div class="nf-table-scrollable-header">
        <table>
          <thead>
            <tr>
              {{#each column in visibleColumns}}
                {{view 'nf-table-header' column=column class=column.headerClassNames controller=parentController}}
              {{/each}}
            </tr>
          </thead>
        </table>
      </div>

      {{#nf-scroll-area 
        scrollTop=scrollTop 
        scrollTopPercentage=scrollTopPercentage 
        changeAction="scrolled" class="nf-table-scrollable-body"}}
        <table>
          <tbody>
            {{#each row in groups.firstObject}}
              <tr {{action 'rowClick' row}} {{bind-attr data-nf-table-sort-key=row.__meta__trackedKey}}>
                {{#each column in visibleColumns}}
                  {{view 'nf-table-cell' column=column class=column.cellClassNames controller=parentController}}
                {{/each}}
              </tr>
            {{/each}}
          </tbody>
        </table>
      {{/nf-scroll-area}}
    {{/if}}

  {{else}}

    {{!-- GROUPED, NOT SCROLLED --}}
    {{#if useGroupedTableLayout}}
      <table>
        <thead>
          <tr>
            {{#each column in visibleColumns}}
              {{view 'nf-table-header' column=column class=column.headerClassNames controller=parentController}}
            {{/each}}
          </tr>
        </thead>

        <tbody>
          {{#each group in groups}}
            <tr class="nf-table-group" {{action 'groupRowClick' group}} {{bind-attr data-nf-table-group-key=group.model.groupKey}}>
              {{#each column in tableGroup.visibleColumns}}
                {{view 'nf-table-cell' column=column class=column.cellClassNames controller=parentController}}
              {{/each}}
            </tr>
            {{#each row in group}}
              <tr class="nf-table-group-child" {{action 'rowClick' row group}} {{bind-attr data-nf-table-sort-key=row.__meta__trackedKey}}>
                {{#each column in visibleColumns}}
                  {{view 'nf-table-cell' column=column class=column.cellClassNames controller=parentController}}
                {{/each}}
              </tr>
            {{/each}}
          {{/each}}
        </tbody>
      </table>
    {{else}}

    {{!-- DEFAULT TABLE --}}
      <table>
        <thead>
          <tr>
            {{#each column in visibleColumns}}
              {{view 'nf-table-header' column=column class=column.headerClassNames controller=parentController}}
            {{/each}}
          </tr>
        </thead>
  
        <tbody>
          {{#each row in groups.firstObject}}
            <tr {{action 'rowClick' row}} {{bind-attr data-nf-table-sort-key=row.__meta__trackedKey}}>
              {{#each column in visibleColumns}}
                {{view 'nf-table-cell' column=column class=column.cellClassNames controller=parentController}}
              {{/each}}
            </tr>
          {{/each}}
        </tbody>
      </table>
    {{/if}}
  {{/if}}
{{/if}}

<div style="display:none">{{yield}}</div>